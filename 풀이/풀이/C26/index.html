<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="./main.css"/>
    <title>Electronic Lock</title>
</head>
<body>
<div class="container mx-auto">
    <div class="flex pt-5">
        <div class="w-1/2 px-8">
            <h1 class="text-3xl mb-4">Expected Code : 6789</h1>
        </div>
        <div class="w-1/2 px-8">
            <div
                    class="bg-gray-100 py-8 px-4 rounded-xl grid grid-cols-3 gap-y-4 justify-items-center items-center"
            >
                <button class="digicode-button">1</button>
                <button class="digicode-button">2</button>
                <button class="digicode-button">3</button>
                <button class="digicode-button">4</button>
                <button class="digicode-button">5</button>
                <button class="digicode-button">6</button>
                <button class="digicode-button">7</button>
                <button class="digicode-button">8</button>
                <button class="digicode-button">9</button>
                <!-- Led switched on/off : Toggle "on" class -->
                <!--             <button class="digicode-button led on"></button>-->
                <div class="digicode-button led"></div>
                <button class="digicode-button">0</button>
                <div></div>
            </div>
        </div>
    </div>
</div>
<script>
    const CODE = '6789';

    const $btn = document.querySelectorAll('.digicode-button');

    let codeArr = [];
    $btn.forEach(e => {
        e.addEventListener('click', function () {
            if(codeArr.length === 4) codeArr = [];
            codeArr.push(this.innerText);
            console.log(codeArr);
            const audio = new Audio();
            audio.src = 'beep.mp3';
            audio.play();
            if(codeArr.length === 4) {
                successChk();
            }
        });
    });

    const successChk = () => {
        const result = codeArr.join('');
        if(result === CODE) {
            document.querySelector('.led').classList.add('on');
            const audio = new Audio();
            audio.src = 'success.mp3';
            audio.play();
        }
    }
</script>
</body>
</html>
